# Azure DevOps pipeline template used to build bundle.
parameters:
  - name: 'api_host'
    type: string
    default: ''

  - name: 'api_webview_pm_hostname'
    type: string
    default: ''

  - name: 'env'
    type: string
    default: ''  

  - name: 'api_wallet_basepath'
    type: string
    default: ''
    
  - name: 'api_pm_basepath'
    type: string
    default: ''

  - name: 'api_timeout'
    type: number
    default: 10000

  - name: 'npg_sdk_url'
    type: string
    default: ''
  
  - name: 'wallet_gdi_check_timeout'
    type: number
    default: 10000

steps:
- bash: |
    chmod +x env.sh
    env -i \
      WALLET_CONFIG_API_HOST=${{ parameters.api_host }} \
      WALLET_CONFIG_WEBVIEW_PM_HOST=${{ parameters.api_webview_pm_hostname }} \
      WALLET_CONFIG_API_BASEPATH=${{ parameters.api_wallet_basepath }} \
      WALLET_CONFIG_API_PM_BASEPATH=${{ parameters.api_pm_basepath }} \
      WALLET_CONFIG_API_TIMEOUT=${{ parameters.api_timeout }} \
      WALLET_CONFIG_API_ENV==${{ parameters.env }} \
      WALLET_NPG_SDK_URL=${{ parameters.npg_sdk_url }} \
      WALLET_GDI_CHECK_TIMEOUT=${{ parameters.wallet_gdi_check_timeout }} \
      bash env.sh

  displayName: 'Populate environment file'
